webpackJsonp([2],{QSR2:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s("fZjL"),a=s.n(o),i=s("fgoS"),n={name:"Users",data:function(){return{group:"",onlyteachers:!1,onlyactive:!0,onlywithoutcode:!1,onlynotsession:!1,onlywithoutorgunit:!1,errors:[],loading:!1,groupsStudents:[],users:[]}},mounted:function(){this.groupsStudents=JSON.parse(sessionStorage.groupsStudents)},methods:{showUsers:function(){var t=this;this.loading=!0,this.users=[],Object(i.b)(null,function(e,s){e?t.errors.push('Error llegint usuaris "'+e.message+'"'):a()(s).forEach(function(e){(!t.onlywithoutcode||s[e].withoutcode||s[e].id.length<15)&&(!t.onlynotsession||s[e].lastLoginTime.getFullYear()<1980)&&(t.onlywithoutorgunit&&"/"!==s[e].organizationalUnit||t.onlyteachers&&!s[e].teacher||t.onlyactive&&s[e].suspended||t.group&&!s[e].groups.includes(t.group)||t.users.push(s[e]))}),t.loading=!1,t.$bvModal.show("modal-ok")})}}},r=s("XyMi");var l=function(t){s("p+G0")},c=Object(r.a)(n,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"card shadow mb-4"},[t._m(0),t._v(" "),s("div",{staticClass:"card-body"},[s("form",{on:{submit:function(t){t.preventDefault()}}},[s("div",{staticClass:"form-group"},[s("label",{staticClass:"col-sm col-form-label",attrs:{for:"group"}},[t._v("Grup d'alumnes")]),t._v(" "),s("div",{staticClass:"col-sm-10"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.group,expression:"group"}],staticClass:"form-control",attrs:{id:"group",name:"group",disabled:t.loading},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.group=e.target.multiple?s:s[0]}}},[s("option",{attrs:{value:""}},[t._v("Tots")]),t._v(" "),t._l(t.groupsStudents,function(e){return s("option",{key:e.email,domProps:{value:e.email}},[t._v("\n                "+t._s(e.nameWithEmail)+"\n              ")])})],2)])]),t._v(" "),s("div",{staticClass:"form-group"},[s("div",{staticClass:"form-check"},[s("label",{staticClass:"form-check-label"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.onlyteachers,expression:"onlyteachers"}],staticClass:"form-check-input",attrs:{id:"onlyteachers",name:"onlyteachers",type:"checkbox",disabled:t.loading},domProps:{checked:Array.isArray(t.onlyteachers)?t._i(t.onlyteachers,null)>-1:t.onlyteachers},on:{change:function(e){var s=t.onlyteachers,o=e.target,a=!!o.checked;if(Array.isArray(s)){var i=t._i(s,null);o.checked?i<0&&(t.onlyteachers=s.concat([null])):i>-1&&(t.onlyteachers=s.slice(0,i).concat(s.slice(i+1)))}else t.onlyteachers=a}}}),t._v(" Només professorat")])])]),t._v(" "),s("div",{staticClass:"form-group"},[s("div",{staticClass:"form-check"},[s("label",{staticClass:"form-check-label"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.onlyactive,expression:"onlyactive"}],staticClass:"form-check-input",attrs:{id:"onlyactive",name:"onlyactive",type:"checkbox",disabled:t.loading},domProps:{checked:Array.isArray(t.onlyactive)?t._i(t.onlyactive,null)>-1:t.onlyactive},on:{change:function(e){var s=t.onlyactive,o=e.target,a=!!o.checked;if(Array.isArray(s)){var i=t._i(s,null);o.checked?i<0&&(t.onlyactive=s.concat([null])):i>-1&&(t.onlyactive=s.slice(0,i).concat(s.slice(i+1)))}else t.onlyactive=a}}}),t._v(" Només usuaris actius")])])]),t._v(" "),s("div",{staticClass:"form-group"},[s("div",{staticClass:"form-check"},[s("label",{staticClass:"form-check-label"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.onlywithoutcode,expression:"onlywithoutcode"}],staticClass:"form-check-input",attrs:{id:"onlywithoutcode",name:"onlywithoutcode",type:"checkbox",disabled:t.loading},domProps:{checked:Array.isArray(t.onlywithoutcode)?t._i(t.onlywithoutcode,null)>-1:t.onlywithoutcode},on:{change:function(e){var s=t.onlywithoutcode,o=e.target,a=!!o.checked;if(Array.isArray(s)){var i=t._i(s,null);o.checked?i<0&&(t.onlywithoutcode=s.concat([null])):i>-1&&(t.onlywithoutcode=s.slice(0,i).concat(s.slice(i+1)))}else t.onlywithoutcode=a}}}),t._v(" Només els usuaris sense ID\n              ")])])]),t._v(" "),s("div",{staticClass:"form-group"},[s("div",{staticClass:"form-check"},[s("label",{staticClass:"form-check-label"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.onlynotsession,expression:"onlynotsession"}],staticClass:"form-check-input",attrs:{id:"onlynotsession",name:"onlynotsession",type:"checkbox",disabled:t.loading},domProps:{checked:Array.isArray(t.onlynotsession)?t._i(t.onlynotsession,null)>-1:t.onlynotsession},on:{change:function(e){var s=t.onlynotsession,o=e.target,a=!!o.checked;if(Array.isArray(s)){var i=t._i(s,null);o.checked?i<0&&(t.onlynotsession=s.concat([null])):i>-1&&(t.onlynotsession=s.slice(0,i).concat(s.slice(i+1)))}else t.onlynotsession=a}}}),t._v(" Només els usuaris que no han iniciat mai sessió\n              ")])])]),t._v(" "),s("div",{staticClass:"form-group"},[s("div",{staticClass:"form-check"},[s("label",{staticClass:"form-check-label"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.onlywithoutorgunit,expression:"onlywithoutorgunit"}],staticClass:"form-check-input",attrs:{id:"onlywithoutorgunit",name:"onlywithoutorgunit",type:"checkbox",disabled:t.loading},domProps:{checked:Array.isArray(t.onlywithoutorgunit)?t._i(t.onlywithoutorgunit,null)>-1:t.onlywithoutorgunit},on:{change:function(e){var s=t.onlywithoutorgunit,o=e.target,a=!!o.checked;if(Array.isArray(s)){var i=t._i(s,null);o.checked?i<0&&(t.onlywithoutorgunit=s.concat([null])):i>-1&&(t.onlywithoutorgunit=s.slice(0,i).concat(s.slice(i+1)))}else t.onlywithoutorgunit=a}}}),t._v(" Només els usuaris de la Unitat Organitzativa principal (/)\n              ")])])]),t._v(" "),s("div",{staticClass:"form-group"},[s("button",{staticClass:"btn btn-primary",attrs:{disabled:t.loading},on:{click:function(e){return t.showUsers()}}},[t.loading?s("span",{staticClass:"spinner-border spinner-border-sm"}):t._e(),t._v("\n            "+t._s(t.loading?"Carregant ...":"Mostrar")+"\n          ")])])])])]),t._v(" "),t._l(t.errors,function(e,o){return s("div",{key:o,staticClass:"alert alert-danger alert-dismissible fade show",attrs:{role:"alert"}},[s("strong",[t._v("ERROR: ")]),t._v(t._s(e)+"\n    "),t._m(1,!0)])}),t._v(" "),s("b-modal",{attrs:{id:"modal-ok",title:"GestIB2Google","ok-only":""}},[s("p",{staticClass:"my-4"},[t._v("Procés finalitzat!")])]),t._v(" "),s("div",{staticClass:"card shadow mb-4"},[t._m(2),t._v(" "),s("div",{staticClass:"card-body"},[s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"table table-bordered",attrs:{width:"100%",cellspacing:"0"}},[t._m(3),t._v(" "),s("tfoot",[s("tr",[s("th",{attrs:{colspan:"5"}},[t._v("Total usuaris trobats: "+t._s(t.users.length))])])]),t._v(" "),s("tbody",[t.loading?s("tr",[t.loading?s("td",{attrs:{colspan:"5"}},[t._v("Carregant ...")]):t._e()]):t._e(),t._v(" "),t.users.length||t.loading?t._e():s("tr",[s("td",{attrs:{colspan:"5"}},[t._v("No hi ha dades carregades")])]),t._v(" "),t._l(t.users,function(e){return s("tr",{key:e.id},[s("td",[t._v(t._s(e.surname+", "+e.name))]),t._v(" "),s("td",[t._v(t._s(e.domainemail))]),t._v(" "),s("td",[t._v(t._s(e.teacher?"PROFESSOR":"Alumne"))]),t._v(" "),s("td",[t._v(t._s(e.groups.join(", ")))]),t._v(" "),s("td",[t._v(t._s(e.organizationalUnit))])])})],2)])])])])],2)},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card-header py-3"},[e("h6",{staticClass:"m-0 font-weight-bold text-primary"},[this._v("Mostrar usuaris del domini")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"alert","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card-header py-3"},[e("h6",{staticClass:"m-0 font-weight-bold text-primary"},[this._v("Usuaris")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",[t._v("Nom")]),t._v(" "),s("th",[t._v("Email")]),t._v(" "),s("th",[t._v("Professor/Alumne")]),t._v(" "),s("th",[t._v("Grups")]),t._v(" "),s("th",[t._v("Unitat")])])])}],!1,l,null,null);e.default=c.exports},"p+G0":function(t,e){}});
//# sourceMappingURL=2.05f6a22af2f11d15b5f1.js.map